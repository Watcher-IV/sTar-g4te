<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Login — Archive</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
    /* RESET */
    :root{--light:#d9d9d9;--muted:#9a9a9a;--bg:#050505}
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}

    /* ESTÉTICA */
    body.crt-vignette{background:var(--bg);color:var(--light);font-family:'Press Start 2P',monospace;overflow:hidden;filter:brightness(0.96)}

    /* SCANLINES */
    .overlay-scanlines{position:fixed;inset:0;pointer-events:none;background-image:repeating-linear-gradient(0deg, rgba(217,217,217,0.018) 0 1px, transparent 1px 3px);mix-blend-mode:screen;z-index:1;opacity:0.6;transform:scale(1.02);filter:contrast(1.08) brightness(0.95);animation:scan-move 10s linear infinite}
    @keyframes scan-move{from{background-position-y:0}to{background-position-y:40px}}

    /* VIGNETTE */
    body.crt-vignette::after{content:"";position:fixed;inset:0;pointer-events:none;z-index:4;background:radial-gradient(ellipse at center, rgba(0,0,0,0) 40%, rgba(0,0,0,0.6) 100%);mix-blend-mode:multiply;opacity:0.9}

    /* GRANULAÇÃO */
    .grain{position:fixed;inset:0;pointer-events:none;z-index:0;opacity:0.06;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><filter id="n"><feTurbulence baseFrequency="0.8" numOctaves="1" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23n)"/></svg>');background-size:200px 200px}

    /* ÁREA CENTRAL */
    .wrap{position:relative;z-index:10;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:40px}

    /* CAIXA */
    .login-card{width:520px;max-width:94vw;padding:40px;border-radius:12px;position:relative;background:rgba(0,0,0,0.55);backdrop-filter:blur(1px);box-shadow:0 12px 60px rgba(0,0,0,0.75);text-align:center}

    /* BORDA via ::before */
    .login-card::before{content:"";position:absolute;left:50%;top:50%;width:calc(100% + 160px);height:calc(100% + 160px);transform:translate(-50%,-50%);background-image:url('assets/border.png');background-repeat:no-repeat;background-position:center;background-size:100% 100%;pointer-events:none;opacity:0.98;mix-blend-mode:screen;filter:grayscale(1) brightness(0.92) contrast(1.02)}

    /* CAMPOS */
    .title{font-size:14px;letter-spacing:2px;margin-bottom:8px}
    .field{display:block;width:100%;margin:12px 0;padding:16px 14px;border-radius:6px;background:linear-gradient(180deg, rgba(255,255,255,0.007), rgba(0,0,0,0.06));border:none;color:var(--light);outline:none;font-size:12px;box-shadow:inset 0 1px 0 rgba(255,255,255,0.02), inset 0 -8px 20px rgba(0,0,0,0.6)}
    .field::placeholder{color:rgba(217,217,217,0.45)}

    /* PARTICULAS */
    .particles{position:fixed;inset:0;pointer-events:none;z-index:2}
    .particle{position:absolute;width:2px;height:2px;border-radius:50%;background:var(--light);opacity:0.06;filter:blur(0.24px);animation:floaty linear infinite}
    @keyframes floaty{from{transform:translateY(-10vh)}to{transform:translateY(110vh)}}

    /* MODAL */
    .modal{position:fixed;left:50%;top:22%;transform:translateX(-50%);min-width:320px;max-width:90vw;background:#070707;border:1px solid rgba(217,217,217,0.18);padding:16px;border-radius:6px;z-index:9999;box-shadow:0 8px 40px rgba(0,0,0,0.85);display:none}
    .modal.show{display:block}
    .modal .modal-inner{font-size:12px;line-height:1.3;color:var(--light)}
    .modal .modal-img{max-width:100%;display:block;margin:8px auto}
    .modal .close{display:inline-block;margin-top:12px;padding:8px 10px;border:1px solid rgba(217,217,217,0.18);border-radius:4px;cursor:pointer;background:transparent;color:var(--light)}

    /* FADE final */
    .fade-wrap{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:#000;z-index:10001;opacity:0;pointer-events:none;transition:opacity 1.4s ease-in}
    .fade-wrap.show{opacity:1;pointer-events:auto}
    .fade-text{font-size:14px;text-align:center;max-width:90vw;color:var(--light)}

    /* GLITCH */
    .glitch{position:relative}
    .glitch::before,.glitch::after{content:attr(data-text);position:absolute;left:0;top:0;pointer-events:none;opacity:0.35}
    .glitch::before{transform:translate(1px,-1px);filter:blur(0.32px)}
    .glitch::after{transform:translate(-1px,1px);filter:blur(0.32px)}

    /* ERRO: animação */
    @keyframes shake{0%{transform:translateX(0)}20%{transform:translateX(-6px)}60%{transform:translateX(5px)}100%{transform:translateX(0)}}
    .error-glitch{animation:shake 420ms ease-in-out;filter:contrast(1.08) saturate(0.98)}
    .scan-flicker{animation:scan-flick 0.6s steps(2,end) 0s 3}
    @keyframes scan-flick{0%{opacity:0.35}50%{opacity:0.9}100%{opacity:0.35}}

    @media (max-width:520px){.login-card{padding:22px;width:92vw}}
  </style>
</head>
<body class="crt-vignette">

  <div class="overlay-scanlines"></div>
  <div class="grain"></div>
  <div class="particles" id="particles"></div>

  <div class="wrap">
    <div class="login-card" role="main">
      <div class="title" aria-hidden="true"></div>

      <label for="user" style="display:none">Usuário</label>
      <input id="user" class="field" type="text" placeholder="Usuário" autocomplete="off" autocapitalize="characters" spellcheck="false" />

      <label for="pass" style="display:none">Senha</label>
      <input id="pass" class="field" type="password" placeholder="Senha" autocomplete="off" spellcheck="false" />
    </div>
  </div>

  <div id="modal" class="modal" role="dialog" aria-modal="true">
    <div class="modal-inner" id="modalInner"></div>
    <img id="modalImg" class="modal-img" src="" alt="" style="display:none"/>
    <div style="text-align:right"><button id="modalClose" class="close">OK</button></div>
  </div>

  <div id="fadeWrap" class="fade-wrap">
    <div class="fade-text pixel-blur glitch" data-text="Bem vindo de volta. Eu estava com saudades.">Bem vindo de volta. Eu estava com saudades.</div>
  </div>

  <script>
    /* ======= CONFIG ======= */
    const VALID_USER = 'SEBASTIAN-IV';
    const VALID_PASS = 'drownedstar7';
    const ERROR_MESSAGES = ['PLACEHOLDER_MSG_1','PLACEHOLDER_MSG_2','PLACEHOLDER_MSG_3','PLACEHOLDER_MSG_4','PLACEHOLDER_MSG_5','PLACEHOLDER_MSG_6','PLACEHOLDER_MSG_7','PLACEHOLDER_MSG_8'];
    const RARE_IMG_PATH = 'assets/lingering.png';
    const RARE_PROBABILITY = 0.08;

    // URL para onde redirecionar após sucesso (substitua pelo seu destino)
    const REDIRECT_URL = 'home.html';
    const REDIRECT_DELAY = 1400;

    /* ======= UI ======= */
    const userInput = document.getElementById('user');
    const passInput = document.getElementById('pass');
    const modal = document.getElementById('modal');
    const modalInner = document.getElementById('modalInner');
    const modalImg = document.getElementById('modalImg');
    const modalClose = document.getElementById('modalClose');
    const fadeWrap = document.getElementById('fadeWrap');
    const wrap = document.querySelector('.wrap');
    const overlay = document.querySelector('.overlay-scanlines');

    userInput.addEventListener('input', ()=> userInput.value = userInput.value.toUpperCase());

    passInput.addEventListener('keydown', function(e){ if(e.key === 'Enter'){ e.preventDefault(); attemptLogin(); } });
    userInput.addEventListener('keydown', function(e){ if(e.key === 'Enter'){ e.preventDefault(); passInput.focus(); } });

    modalClose.addEventListener('click', ()=>{ hideModal(); passInput.focus(); });

    function showModal({text=null,img=null}){
      if(img){ modalImg.src = img; modalImg.style.display = 'block'; modalInner.style.display='none'; }
      else { modalImg.style.display = 'none'; modalInner.style.display='block'; modalInner.textContent = text; }
      modal.classList.add('show');
    }
    function hideModal(){ modal.classList.remove('show'); }

    function attemptLogin(){
      const u = (userInput.value||'').trim();
      const p = (passInput.value||'').trim();
      if(u === VALID_USER && p === VALID_PASS){ doSuccess(); }
      else { showRandomError(); }
    }

    function doSuccess(){
      document.body.style.transition = 'filter 1s ease';
      document.body.style.filter = 'contrast(0.6) blur(0.5px)';
      fadeWrap.classList.add('show');
      setTimeout(()=>{ window.location.href = REDIRECT_URL; }, REDIRECT_DELAY);
    }

    function showRandomError(){
      wrap.classList.add('error-glitch'); overlay.classList.add('scan-flicker');
      setTimeout(()=>{ wrap.classList.remove('error-glitch'); overlay.classList.remove('scan-flicker'); },800);
      const rareRoll = Math.random();
      if(rareRoll < RARE_PROBABILITY){ showModal({img:RARE_IMG_PATH}); return; }
      const msg = ERROR_MESSAGES[Math.floor(Math.random()*ERROR_MESSAGES.length)];
      const percent = (Math.random()*100).toFixed(2) + '%';
      showModal({text: msg + ' — ' + percent});
    }

    /* ======= Partículas ======= */
    const particlesRoot = document.getElementById('particles');
    const NUM_PARTICLES = 40;
    for(let i=0;i<NUM_PARTICLES;i++){
      const el = document.createElement('span'); el.className = 'particle';
      const left = Math.random()*100; const delay = Math.random()*-60; const scale = 0.6 + Math.random()*1.6;
      el.style.left = left + 'vw'; el.style.top = (Math.random()*120 - 10) + 'vh'; el.style.opacity = (0.10 + Math.random()*0.08);
      el.style.width = (1 + Math.random()*2) + 'px'; el.style.height = el.style.width; el.style.transform = `scale(${scale})`;
      el.style.animationDuration = (30 + Math.random()*70) + 's'; el.style.animationDelay = delay + 's'; particlesRoot.appendChild(el);
    }

    /* ======= Acessibilidade ======= */
    passInput.focus();
    window.addEventListener('keydown', e => { if(e.key === 'Enter'){ const active = document.activeElement; if(active !== passInput && active !== userInput){ e.preventDefault(); } } });
    userInput.addEventListener('paste', e => { e.preventDefault(); });
  </script>

</body>
</html>
